<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter 4: Visualizing sensor data in the cloud | Particle Maker Kit Workshop</title>
    <meta name="description" content="Workshops designed to teach the basics of IoT development with the Particle ecosystem &amp; the Particle Photon">
    
    
    <link rel="preload" href="/assets/css/7.styles.78510396.css" as="style"><link rel="preload" href="/assets/js/app.f96e0021.js" as="script"><link rel="preload" href="/assets/js/1.ed1cf747.js" as="script"><link rel="prefetch" href="/assets/js/0.a98946f6.js"><link rel="prefetch" href="/assets/js/2.ee22b393.js"><link rel="prefetch" href="/assets/js/3.43b75f49.js"><link rel="prefetch" href="/assets/js/4.7d8ce466.js"><link rel="prefetch" href="/assets/js/5.d42eafc0.js"><link rel="prefetch" href="/assets/js/6.aeee8a8b.js">
    <link rel="stylesheet" href="/assets/css/7.styles.78510396.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Particle Maker Kit Workshop
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://particle.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Team
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/particle-iot/maker-kit-workshop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="http://particle.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Team
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><a href="https://github.com/particle-iot/maker-kit-workshop" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><a href="/docs/" class="sidebar-link">About Particle Workshops</a></li><li><a href="/docs/ch1.html" class="sidebar-link">Chapter 1: Claiming your device</a></li><li><a href="/docs/ch2.html" class="sidebar-link">Chapter 2: Reading from sensors and posting data to the cloud</a></li><li><a href="/docs/ch3.html" class="sidebar-link">Chapter 3: Connecting the Particle Device Cloud to Azure</a></li><li><a href="/docs/ch4.html" class="active sidebar-link">Chapter 4: Visualizing sensor data in the cloud</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/ch4.html#add-a-new-consumer-group-to-iot-hub" class="sidebar-link">Add a new Consumer Group to IoT Hub</a></li><li class="sidebar-sub-header"><a href="/docs/ch4.html#setting-up-stream-analytics" class="sidebar-link">Setting Up Stream Analytics</a></li><li class="sidebar-sub-header"><a href="/docs/ch4.html#create-a-live-streaming-power-bi-dashboard" class="sidebar-link">Create a Live Streaming Power BI Dashboard</a></li></ul></li><li><a href="/docs/ch5.html" class="sidebar-link">Chapter 5: Controlling your devices from the cloud</a></li></ul></div><div class="page"><div class="content"><h1 id="chapter-4-visualizing-sensor-data-in-the-cloud"><a href="#chapter-4-visualizing-sensor-data-in-the-cloud" aria-hidden="true" class="header-anchor">#</a> Chapter 4: Visualizing sensor data in the cloud</h1><table><thead><tr><th><strong>Project Goal</strong></th><th></th></tr></thead><tbody><tr><td><strong>What you’ll learn</strong></td><td>Streaming data to Power BI</td></tr><tr><td><strong>Tools you’ll need</strong></td><td>Azure Account, Power BI Account</td></tr><tr><td><strong>Time needed to complete</strong></td><td>30 minutes</td></tr></tbody></table><p>In this exercise, we're going to send data from IoT Hub to Power BI. When we do that, we'll be able to visualize our temperature data in real-time, as it comes in from the Particle Cloud.</p><p><img src="/assets/img/power-bi-done.e93aac3d.png" alt></p><h2 id="add-a-new-consumer-group-to-iot-hub"><a href="#add-a-new-consumer-group-to-iot-hub" aria-hidden="true" class="header-anchor">#</a> Add a new Consumer Group to IoT Hub</h2><ol><li>In your IoT Hub, select &quot;Endpoints&quot; under the &quot;Messaging&quot; section and then click on &quot;Events&quot; under Built-in Endpoints.</li></ol><p><img src="/assets/img/iot-hub-events.a4cec334.png" alt></p><ol start="2"><li>Add a new Consumer Group. Call it &quot;stream&quot;. Click the &quot;Save&quot; button at the top.</li></ol><p><img src="/assets/img/new-consumer-group.215d42ce.png" alt></p><h2 id="setting-up-stream-analytics"><a href="#setting-up-stream-analytics" aria-hidden="true" class="header-anchor">#</a> Setting Up Stream Analytics</h2><ol><li>Create a new Stream Analytics Job in the Azure Portal</li></ol><p><img src="/assets/img/new-stream-analytics.86da5209.png" alt></p><ol start="2"><li>Give it a name and put it in the same resource group as your IoT Hub. Click &quot;Create&quot;.</li></ol><p><img src="/assets/img/new-stream-analytics-settings.d8625a9a.png" alt></p><ol start="3"><li>Once the resource is created, you can click on the bell in the right-hand corner to access it. It's also a good idea to pin it to the dashboard at this time.</li></ol><p><img src="/assets/img/go-to-resource-pin-to-dashboard.03dee908.png" alt></p><ol start="4"><li>Under the section &quot;Job Topology&quot;, select &quot;inputs&quot;</li></ol><p><img src="/assets/img/job-topology-inputs.019cc716.png" alt></p><ol start="5"><li>Click on &quot;Add Stream Input&quot; and select &quot;IoT Hub&quot;</li></ol><p><img src="/assets/img/add-stream-input.c15f5bec.png" alt></p><ol start="6"><li>Name it &quot;iothub&quot;. Select the correct IoT Hub from your subscription. Change the &quot;Shared access policy name&quot; to the policy you created in Chapter 3. Change the &quot;Consumer Group&quot; to the group you created in the first part of this chapter. Click &quot;Save&quot;</li></ol><p><img src="/assets/img/new-input.3b90ae16.png" alt></p><ol start="7"><li>Under the &quot;Job Topology&quot; section, select &quot;Outputs&quot;. Click the &quot;Add&quot; button and select &quot;Power BI&quot; from the dropdown list.</li></ol><p><img src="/assets/img/new-output.cd28d9e2.png" alt></p><ol start="8"><li>Name it &quot;powerbi&quot;. You will need to authorize the Azure Portal to Power BI at this point. Once you have done that, you can use the &quot;My Workspace&quot; Group Workspace. Name the Dataset &quot;Photon Data&quot; and the table &quot;Temperature&quot;.</li></ol><p><img src="/assets/img/new-output.cd28d9e2.png" alt></p><ol start="9"><li>Click on the &quot;Query&quot; option under &quot;Job Topology&quot;. Enter the following query...</li></ol><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>
    DEVICE_ID <span class="token keyword">AS</span> Device<span class="token punctuation">,</span>
    EVENT <span class="token keyword">AS</span> Event<span class="token punctuation">,</span>
    PUBLISHED_AT <span class="token keyword">AS</span> Published<span class="token punctuation">,</span>
    CAST<span class="token punctuation">(</span><span class="token keyword">DATA</span> <span class="token keyword">AS</span> <span class="token keyword">BIGINT</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> Temperature
<span class="token keyword">INTO</span>
    powerbi
<span class="token keyword">FROM</span>
    iothub
</code></pre></div><p>Don't forget to click &quot;Save&quot;.</p><p><img src="/assets/img/alter-query.598bc519.png" alt></p><ol start="10"><li>Click on the &quot;Overview&quot; item and click the &quot;Start&quot; button to start the Stream Analytics job.</li></ol><p><img src="/assets/img/overview-start-start.beaa62c2.png" alt></p><h2 id="create-a-live-streaming-power-bi-dashboard"><a href="#create-a-live-streaming-power-bi-dashboard" aria-hidden="true" class="header-anchor">#</a> Create a Live Streaming Power BI Dashboard</h2><ol><li><p>Log in to Power BI at <a href="powerbi.microsoft.com">powerbi.microsoft.com</a></p></li><li><p>Click on the &quot;My Workspace&quot; section in the sidebar. Click the + button in the corner to create a new dashboard.</p></li></ol><p><img src="/assets/img/create-dashboard.2dc6713d.png" alt></p><ol start="3"><li>Name the dashboard &quot;Particle Dashboard&quot;</li></ol><p><img src="/assets/img/dashboard-name.ae2fef65.png" alt></p><ol start="4"><li>Click the &quot;Add Tile&quot; button</li></ol><p><img src="/assets/img/add-tile.9b058f8e.png" alt></p><ol start="5"><li>Scroll down on the right-hand side and select &quot;Custom Streaming Data&quot;. Then select &quot;Photon Data&quot;. Click &quot;Next&quot;.</li></ol><p><img src="/assets/img/photon-dataset.5dedadae.png" alt></p><ol start="6"><li>Select the &quot;Line chart&quot; visualisation type. For the &quot;Axis&quot;, click &quot;Add value&quot; and select &quot;published&quot;. Scroll down a little further to the next &quot;Value&quot; field and select &quot;Temperature&quot;. Then click &quot;Next&quot;.</li></ol><p><img src="/assets/img/custom-streaming-tile.e41f8e58.png" alt></p><ol start="7"><li>Add any tile details you like and click &quot;Apply&quot;</li></ol><p><img src="/assets/img/tile-details.06b80b19.png" alt></p><p>You should now have a line chart that will update every 10 seconds with the current temperature of your thermometer. It's still a bit hard to know exactly what the current temperature is. See if you can add another tile on your own which pulls from the streaming data set and just shows the current temperature.</p><p><img src="/assets/img/power-bi-done.e93aac3d.png" alt></p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/particle-iot/maker-kit-workshop/edit/master/docs/ch4.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs/ch3.html" class="prev">
          Chapter 3: Connecting the Particle Device Cloud to Azure
        </a></span><span class="next"><a href="/docs/ch5.html">
          Chapter 5: Controlling your devices from the cloud
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/1.ed1cf747.js" defer></script><script src="/assets/js/app.f96e0021.js" defer></script>
  </body>
</html>
