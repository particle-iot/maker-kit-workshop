(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{162:function(t,e,a){t.exports=a.p+"assets/img/power-bi-done.e93aac3d.png"},163:function(t,e,a){t.exports=a.p+"assets/img/new-output.cd28d9e2.png"},250:function(t,e,a){t.exports=a.p+"assets/img/iot-hub-events.a4cec334.png"},251:function(t,e,a){t.exports=a.p+"assets/img/new-consumer-group.215d42ce.png"},252:function(t,e,a){t.exports=a.p+"assets/img/new-stream-analytics.86da5209.png"},253:function(t,e,a){t.exports=a.p+"assets/img/new-stream-analytics-settings.d8625a9a.png"},254:function(t,e,a){t.exports=a.p+"assets/img/go-to-resource-pin-to-dashboard.03dee908.png"},255:function(t,e,a){t.exports=a.p+"assets/img/job-topology-inputs.019cc716.png"},256:function(t,e,a){t.exports=a.p+"assets/img/add-stream-input.c15f5bec.png"},257:function(t,e,a){t.exports=a.p+"assets/img/new-input.3b90ae16.png"},258:function(t,e,a){t.exports=a.p+"assets/img/alter-query.598bc519.png"},259:function(t,e,a){t.exports=a.p+"assets/img/overview-start-start.beaa62c2.png"},260:function(t,e,a){t.exports=a.p+"assets/img/create-dashboard.2dc6713d.png"},261:function(t,e,a){t.exports=a.p+"assets/img/dashboard-name.ae2fef65.png"},262:function(t,e,a){t.exports=a.p+"assets/img/add-tile.9b058f8e.png"},263:function(t,e,a){t.exports=a.p+"assets/img/photon-dataset.5dedadae.png"},264:function(t,e,a){t.exports=a.p+"assets/img/custom-streaming-tile.e41f8e58.png"},265:function(t,e,a){t.exports=a.p+"assets/img/tile-details.06b80b19.png"},272:function(t,e,a){"use strict";a.r(e);var s=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"chapter-4-visualizing-sensor-data-in-the-cloud"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#chapter-4-visualizing-sensor-data-in-the-cloud","aria-hidden":"true"}},[t._v("#")]),t._v(" Chapter 4: Visualizing sensor data in the cloud")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("strong",[t._v("Project Goal")])]),t._v(" "),s("th")])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("strong",[t._v("What you’ll learn")])]),t._v(" "),s("td",[t._v("Streaming data to Power BI")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Tools you’ll need")])]),t._v(" "),s("td",[t._v("Azure Account, Power BI Account")])]),t._v(" "),s("tr",[s("td",[s("strong",[t._v("Time needed to complete")])]),t._v(" "),s("td",[t._v("30 minutes")])])])]),t._v(" "),s("p",[t._v("In this exercise, we're going to send data from IoT Hub to Power BI. When we do that, we'll be able to visualize our temperature data in real-time, as it comes in from the Particle Cloud.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(162),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"add-a-new-consumer-group-to-iot-hub"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#add-a-new-consumer-group-to-iot-hub","aria-hidden":"true"}},[t._v("#")]),t._v(" Add a new Consumer Group to IoT Hub")]),t._v(" "),s("ol",[s("li",[t._v('In your IoT Hub, select "Endpoints" under the "Messaging" section and then click on "Events" under Built-in Endpoints.')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(250),alt:""}})]),t._v(" "),s("ol",[s("li",[t._v('Add a new Consumer Group. Call it "stream". Click the "Save" button at the top.')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(251),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"setting-up-stream-analytics"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-stream-analytics","aria-hidden":"true"}},[t._v("#")]),t._v(" Setting Up Stream Analytics")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Create a new Stream Analytics Job in the Azure Portal")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(252),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Give it a name and put it in the same resource group as your IoT Hub. Click "Create".')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(253),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Once the resource is created, you can click on the bell in the right-hand corner to access it. It's also a good idea to pin it to the dashboard at this time.")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(254),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Under the section "Job Topology", select "inputs"')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(255),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Click on "Add Stream Input" and select "IoT Hub"')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(256),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Name it "iothub". Select the correct IoT Hub from your subscription. Change the "Shared access policy name" to the policy you created in Chapter 3. Change the "Consumer Group" to the group you created in the first part of this chapter. Click "Save"')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(257),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Under the "Job Topology" section, select "Outputs". Click the "Add" button and select "Power BI" from the dropdown list.')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(163),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Name it "powerbi". You will need to authorize the Azure Portal to Power BI at this point. Once you have done that, you can use the "My Workspace" Group Workspace. Name the Dataset "Photon Data" and the table "Temperature".')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(163),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Click on the "Query" option under "Job Topology". Enter the following query...')])]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v("\n    DEVICE_ID "),s("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" Device"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    EVENT "),s("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" Event"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    PUBLISHED_AT "),s("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" Published"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    CAST"),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{attrs:{class:"token keyword"}},[t._v("DATA")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("BIGINT")]),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" Temperature\n"),s("span",{attrs:{class:"token keyword"}},[t._v("INTO")]),t._v("\n    powerbi\n"),s("span",{attrs:{class:"token keyword"}},[t._v("FROM")]),t._v("\n    iothub\n")])])]),s("p",[t._v('Don\'t forget to click "Save".')]),t._v(" "),s("p",[s("img",{attrs:{src:a(258),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v('Click on the "Overview" item and click the "Start" button to start the Stream Analytics job.')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(259),alt:""}})]),t._v(" "),s("h2",{attrs:{id:"create-a-live-streaming-power-bi-dashboard"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#create-a-live-streaming-power-bi-dashboard","aria-hidden":"true"}},[t._v("#")]),t._v(" Create a Live Streaming Power BI Dashboard")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[t._v("Log in to Power BI at "),s("a",{attrs:{href:"powerbi.microsoft.com"}},[t._v("powerbi.microsoft.com")])])]),t._v(" "),s("li",[s("p",[t._v('Click on the "My Workspace" section in the sidebar. Click the + button in the corner to create a new dashboard.')])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(260),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v('Name the dashboard "Particle Dashboard"')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(261),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v('Click the "Add Tile" button')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(262),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v('Scroll down on the right-hand side and select "Custom Streaming Data". Then select "Photon Data". Click "Next".')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(263),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v('Select the "Line chart" visualisation type. For the "Axis", click "Add value" and select "published". Scroll down a little further to the next "Value" field and select "Temperature". Then click "Next".')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(264),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v('Add any tile details you like and click "Apply"')])]),t._v(" "),s("p",[s("img",{attrs:{src:a(265),alt:""}})]),t._v(" "),s("p",[t._v("You should now have a line chart that will update every 10 seconds with the current temperature of your thermometer. It's still a bit hard to know exactly what the current temperature is. See if you can add another tile on your own which pulls from the streaming data set and just shows the current temperature.")]),t._v(" "),s("p",[s("img",{attrs:{src:a(162),alt:""}})])])}],r=a(0),o=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},s,!1,null,null,null);o.options.__file="ch4.md";e.default=o.exports}}]);